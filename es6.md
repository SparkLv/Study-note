# ES6

---

ECMAScript 6 在接下来的一段时间内将成为 ECMAScript的一个标准。不管在Github,还是在很多社区，javascript爱好者已经早已开始拥抱变化，享受ES6 带来的美好,这篇文章将介绍ES6的一些新特性。

## let和const命令

let与var相似，但是所声明的变量只在let命令所在的代码块内有效

* 不存在变量提升：如果在声明前使用，会抛出错误
* 暂时性死区：只要块级作用域中存在let命令，那么它所声明的变量就绑定这个区域，不再受外部影响。
* 不允许重复声明：不允许在相同作用域内，重复声明同一个变量。所以，也不能在函数内部重新声明参数
* let实际上新增了块级作用域
* const声明一个只读得常量，一旦声明，必须初始化，并且值不得改变（如果是对象或者数组，可以改变属性）。其他特性与let相似
* 在浏览器中let和const定义的全局变量将和window脱离

## 解构赋值

### 基本用法

允许按照一定模式，从数组和对象中提取值，对变量进行赋值。

例如：

```javascript
let [a,b,c]=[1,2,3]
```

* 这种写法属于 模式匹配 只要等号两边的模式相同，左边的变量就会被赋予对应的值，如果解构不成功，变量的值就等于undefined
* 如果等号右边是不可遍历的结构，那么将会报错
* 解构赋值允许指定默认值，只有数组成员严格等于undefined，默认值才会生效

### 对象的解构赋值

* 对象的属性没有次序，变量必须与属性同名

```javascript
let {a:a,b:b}={a:'a',b:'b'}
```
* 对象结构赋值会将等号右边的表达式转化为对象，如果不能转化为对象，则报错

## 字符串的扩展

### Unicode表示

\u这种表示法，只限于\u0000~\uFFFF之间的字符，超过这个范围的字符必须用双字节形式表示，但是ES6可以使用大括号，这样就可以正确解读

### 遍历

字符串可以被for...of循环遍历

### includes(),startsWith(),endsWith()

* indcludes():返回布尔值，表示是否找到了参数字符串
* startsWith():返回布尔值，表示字符串是否在头部
* endsWith():返回布尔值，表示字符串是否在尾部

这三个方法都有第二个可选参数，表示搜索位置，endsWith表示的是针对前n个字符，而其他两个方法针对n位置

### repeat()

返回一个新字符串，表示将原字符串重复n次

### padStart,padEnd()

功能分别是头部补全和尾部补全，第一个参数是长度第二个是用于补全的字符串

### 模板字符串

使用反引号 ` 来定义模板字符串，可以定义多行字符串，也可以插入变量(使用${}插入，也可以插入表达式)

## 数值的扩展

### 指数运算符

* \*\*

## 函数的扩展

### 默认值

* es6允许为函数的参数设置默认值，直接写在参数定义的后面
* 使用参数默认值时，函数不能有同名参数
* length属性，将返回没有指定默认值的参数的个数

### rest参数

用于获取函数的多余参数（...params）

与arguments对象的区别在于，rest参数是个数组，因此有数组的方法

### 箭头函数

* 函数体内的this对象，就是定义时所在的对象，而不是使用时所在的对象
* 不可以当作构造函数，也就是说，不可以使用new命令
* 不可以使用arguments对象，可以使用rest参数代替
* 不可以使用yield命令，因此箭头函数不能用作Generator函数
* 实际上，箭头函数根本没有自己的this，导致内部的this就是外层代码块的this。所以不能用作构造函数，也不能用call()、apply()、bind()这些方法去改变this的指向

## 数组的扩展

### 扩展运算符

`...`好比rest参数得逆运算，将一个数组转为用逗号分隔得参数序列

#### 复制数组

```js
const [...a2] = [1,2,3]
```

#### 合并数组

```js
[...arr1,...arr2,...arr3]
```

#### 解构赋值

```js
const [first,...rest]=[1,2,3,4,5]
```

#### 字符串

```js
[...'string']
```

### Array.from()

用于将两类对象转换为真正的数组：类似数组的对象和可遍历的对象，接受第二个参数，是类似map数组的map方法

### Array.of()

用于将一组值转换为数组，为了弥补Array的不足

### copyWithin()

是数组实例的方法

能接受三个参数：
* target(必需):从该位置开始替换数据
* start:从该位置开始读取数据，默认为0
* end:到该位置前停止读取数据，默认为数组长度

### find()和findIndex()

用于找出第一个符合条件的数组成员，分别返回value和index,回调函数的参数为value,index,arr

find方法弥补了indexOf不能校验NaN的问题

### fill()

用给定值填充数组，第二个参数指定起始位置，第三个参数指定结束为止

### entries(),key(),values()

用于遍历数组，都返回一个遍历器对象，可以用for...of循环遍历，不同的是key是对键名的遍历，values()是对键值的遍历，entries()是对键值对的遍历。
如果使用for...of循环，可以使用next方法

### includes

返回一个布尔值，表示数组是否包含给定值，第二个参数表示搜索的起始位置

